{"pageProps":{"title":"double二进制布局","date":"2020-08-26T14:20:00.000Z","author":[{"name":"mq","link":""}],"html":"<h1>double二进制布局</h1>\n<h2>IEEE754</h2>\n<pre><code>+-+-----------+----------------------------------------------------+\n|s| exp(11bit)|                     mantissa(52bit)                |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<ul>\n<li>\n<p>exp存的移码（真实值+1023) (非规格化数指数位为0，真实指数为-1023)</p>\n</li>\n<li>\n<p>mantissa二进制小数去掉最高位的非零：1.xxxxxxxx(2) 只保留 x 的部分</p>\n</li>\n<li>\n<p>s是符号位</p>\n</li>\n<li>\n<p>真实值 = <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>s</mi><mo>⋅</mo><mn>1.</mn><mrow><mi>m</mi><mi>a</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>a</mi></mrow><mo>⋅</mo><msup><mn>2</mn><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>−</mo><mn>1023</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">{s} \\cdot 1 . {mantissa} \\cdot 2 ^ { exp - 1023 }</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">a</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mord mathdefault mtight\">p</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n</ul>\n<h3>e.g. 1.5</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|01111111111|1000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+|   1023    |                  二进制的0.5 (省略首位1)           |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<h3>e.g. 最大奇数 (加减乘除不丢精度最大整数范围)</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|10000110011|1111111111111111111111111111111111111111111111111111|\n+-+-----------+----------------------------------------------------+\n|+| 真实值52  |                 52个1                              |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<p>这个数就是 (0b1.&lt;52个1&gt;) * 2^52 = 0b&lt;53个1&gt;</p>\n<h3>e.g. 最大值</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|01111111111|1111111111111111111111111111111111111111111111111111|\n+-+-----------+----------------------------------------------------+\n|+| 真实值1023|                 52个1                              |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<p>这个数就是 (0b1.&lt;52个1&gt;) * 2^1023</p>\n<h3>e.g. More on the “bias”</h3>\n<ul>\n<li>In IEEE 754 floating point numbers, the exponent is biased in the engineering sense of the\nword – the value stored is offset from the actual value by the exponent bias.</li>\n<li>Biasing is done because exponents have to be signed values in order to be able to\nrepresent both tiny and huge values, but two's complement, the usual representation for\nsigned values, would make comparison harder.</li>\n<li>To solve this problem the exponent is biased before being stored, by adjusting its value to\nput it within an unsigned range suitable for comparison.</li>\n<li>By arranging the fields so that the sign bit is in the most significant bit position, the biased\nexponent in the middle, then the mantissa in the least significant bits, the resulting value\nwill be ordered properly, whether it's interpreted as a floating point or integer value. This\nallows high speed comparisons of floating point numbers using fixed point hardware.</li>\n<li>When interpreting the floating-point number, the bias is subtracted to retrieve the actual\nexponent.</li>\n<li>For a single-precision number, an exponent in the range −126 .. +127 is biased by adding\n127 to get a value in the range 1 .. 254 (0 and 255 have special meanings).</li>\n<li>For a double-precision number, an exponent in the range −1022 .. +1023 is biased by adding\n1023 to get a value in the range 1 .. 2046 (0 and 2047 have special meanings).</li>\n</ul>\n<h3>e.g. INF</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|11111111111|0000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+| 全1       |                 全0                                |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<h3>e.g. NAN</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|11111111111|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|\n+-+-----------+----------------------------------------------------+\n|+| 全1       |                 非0                                |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<p>因此非零的部分可以用来存数据，取值区间是1 ~ 2^52-1</p>\n<h3>e.g. 最小规格化正数</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|00000000001|0000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+| 表示-1022 |                 全0                                |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<p>表示 1 * 2^-1022</p>\n<h3>e.g. 非规格化</h3>\n<pre><code>+-+-----------+----------------------------------------------------+\n|0|00000000000|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|\n+-+-----------+----------------------------------------------------+\n|+| 全0       |                 非0                                |\n+-+-----------+----------------------------------------------------+\n</code></pre>\n<p>指数位全0，真实指数为-1023</p>\n<p>表示值为 (0b1.XXXXXXX...) * 2^-1023</p>\n<p>非规格化数小于任何规格化数(正的，负的相反)</p>\n"},"__N_SSG":true}