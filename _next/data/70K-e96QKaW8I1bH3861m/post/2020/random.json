{"pageProps":{"title":"关于随机数的一些讨论","date":"2020-08-31T19:50:00.000Z","author":[{"name":"mq","link":""}],"html":"<h1>关于随机数的一些讨论</h1>\n<h2><code>rand()</code> 真的够用了</h2>\n<p>linux下rand是线程安全的</p>\n<h2><code>randint(min, max)</code> 错误实现导致溢出UB可能造成一些无法预料的结果</h2>\n<ul>\n<li>错误姿势❌:</li>\n</ul>\n<pre><code>range = max-min // 溢出UB\nreturn rand() % range + min // 模可能不均匀\n</code></pre>\n<ul>\n<li>正确姿势✔</li>\n</ul>\n<pre><code>umin = 移码(min)\numax = 移码(max)\nrange = umax - umin\n// 这里就不说如何解决区间映射的问题了\n</code></pre>\n<p>其中<code>移码</code>, 是把区间<code>[INT_MIN, INT_MAX]</code>映射到<code>[0, UINT_MAX]</code></p>\n"},"__N_SSG":true}