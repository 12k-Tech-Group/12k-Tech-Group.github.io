<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>12k Tech Blog - double二进制布局</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous"/><link rel="stylesheet" href="/css/github-markdown.css"/><link rel="stylesheet" href="/css/highlight.css"/><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"></script><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/556eb87153dc9ca625fe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/556eb87153dc9ca625fe.css"/><link rel="preload" href="/_next/static/css/47b2eccbc2f53b4c5bb6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/47b2eccbc2f53b4c5bb6.css"/><link rel="preload" href="/_next/static/chunks/main-794d8598b5f1f819e70a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.6c6c2144b5674c37af03.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.c1da88ced54c9ffa7714.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-6b3651ecef8878c0ce3d.js" as="script"/><link rel="preload" href="/_next/static/chunks/99a17ff61bb56832986f97369f36a5b6e9c99511.4b656b6a47797cef6e06.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5B...all%5D-2d583e24f5dfdb34109a.js" as="script"/></head><body><div id="__next"><div><div class="relative bg-white Banner_banner__2vTsv"><div class="white pt6 pb5 Banner_banner_content__1HXXB"><h1 class="mv2 f2">12K Tech Blog</h1><div><a class="dib f6 white no-underline mr2" href="/">HOME</a><a class="dib f6 white no-underline mr2" href="https://github.com/12k-Tech-Group">GITHUB</a></div></div></div><main class="lh-copy"><div class="center mw6 ph4 pv3 bg-white markdown-body Post_markdown_body__1i0dP"><small class="mt1 db ttu o-40 Post_post_header__2ubQL"><span>mq<!-- --> </span><time>2020/08/26</time></small><div><h1>double二进制布局</h1>
<h2>IEEE754</h2>
<pre><code>+-+-----------+----------------------------------------------------+
|s| exp(11bit)|                     mantissa(52bit)                |
+-+-----------+----------------------------------------------------+
</code></pre>
<ul>
<li>
<p>exp存的移码（真实值+1023) (非规格化数指数位为0，真实指数为-1023)</p>
</li>
<li>
<p>mantissa二进制小数去掉最高位的非零：1.xxxxxxxx(2) 只保留 x 的部分</p>
</li>
<li>
<p>s是符号位</p>
</li>
<li>
<p>真实值 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>⋅</mo><mn>1.</mn><mrow><mi>m</mi><mi>a</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>s</mi><mi>s</mi><mi>a</mi></mrow><mo>⋅</mo><msup><mn>2</mn><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>−</mo><mn>1023</mn></mrow></msup></mrow><annotation encoding="application/x-tex">{s} \cdot 1 . {mantissa} \cdot 2 ^ { exp - 1023 }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">s</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">a</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">2</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></p>
</li>
</ul>
<h3>e.g. 1.5</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|01111111111|1000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+|   1023    |                  二进制的0.5 (省略首位1)           |
+-+-----------+----------------------------------------------------+
</code></pre>
<h3>e.g. 最大奇数 (加减乘除不丢精度最大整数范围)</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|10000110011|1111111111111111111111111111111111111111111111111111|
+-+-----------+----------------------------------------------------+
|+| 真实值52  |                 52个1                              |
+-+-----------+----------------------------------------------------+
</code></pre>
<p>这个数就是 (0b1.&lt;52个1&gt;) * 2^52 = 0b&lt;53个1&gt;</p>
<h3>e.g. 最大值</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|01111111111|1111111111111111111111111111111111111111111111111111|
+-+-----------+----------------------------------------------------+
|+| 真实值1023|                 52个1                              |
+-+-----------+----------------------------------------------------+
</code></pre>
<p>这个数就是 (0b1.&lt;52个1&gt;) * 2^1023</p>
<h3>e.g. INF</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|11111111111|0000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+| 全1       |                 全0                                |
+-+-----------+----------------------------------------------------+
</code></pre>
<h3>e.g. NAN</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|11111111111|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|
+-+-----------+----------------------------------------------------+
|+| 全1       |                 非0                                |
+-+-----------+----------------------------------------------------+
</code></pre>
<p>因此非零的部分可以用来存数据，取值区间是1 ~ 2^52-1</p>
<h3>e.g. 最小规格化正数</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|00000000001|0000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+| 表示-1022 |                 全0                                |
+-+-----------+----------------------------------------------------+
</code></pre>
<p>表示 1 * 2^-1022</p>
<h3>e.g. 非规格化</h3>
<pre><code>+-+-----------+----------------------------------------------------+
|0|00000000000|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|
+-+-----------+----------------------------------------------------+
|+| 全0       |                 非0                                |
+-+-----------+----------------------------------------------------+
</code></pre>
<p>指数位全0，真实指数为-1023</p>
<p>表示值为 (0b1.XXXXXXX...) * 2^-1023</p>
<p>非规格化数小于任何规格化数(正的，负的相反)</p>
</div></div></main><footer class="center w5 f6 tc mt4 black"><p><span>© </span><span>2020-<!-- -->2020<!-- --> 12k Tech Blog</span></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"double二进制布局","date":"2020-08-26T14:20:00.000Z","author":[{"name":"mq","link":""}],"html":"\u003ch1\u003edouble二进制布局\u003c/h1\u003e\n\u003ch2\u003eIEEE754\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|s| exp(11bit)|                     mantissa(52bit)                |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eexp存的移码（真实值+1023) (非规格化数指数位为0，真实指数为-1023)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003emantissa二进制小数去掉最高位的非零：1.xxxxxxxx(2) 只保留 x 的部分\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003es是符号位\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e真实值 = \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmo\u003e⋅\u003c/mo\u003e\u003cmn\u003e1.\u003c/mn\u003e\u003cmrow\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003c/mrow\u003e\u003cmo\u003e⋅\u003c/mo\u003e\u003cmsup\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmrow\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1023\u003c/mn\u003e\u003c/mrow\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e{s} \\cdot 1 . {mantissa} \\cdot 2 ^ { exp - 1023 }\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathdefault\"\u003es\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e⋅\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathdefault\"\u003em\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003ea\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003en\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathdefault\"\u003ea\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e⋅\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e2\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141079999999999em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathdefault mtight\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathdefault mtight\"\u003ex\u003c/span\u003e\u003cspan class=\"mord mathdefault mtight\"\u003ep\u003c/span\u003e\u003cspan class=\"mbin mtight\"\u003e−\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e0\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ee.g. 1.5\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|01111111111|1000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+|   1023    |                  二进制的0.5 (省略首位1)           |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ee.g. 最大奇数 (加减乘除不丢精度最大整数范围)\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|10000110011|1111111111111111111111111111111111111111111111111111|\n+-+-----------+----------------------------------------------------+\n|+| 真实值52  |                 52个1                              |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这个数就是 (0b1.\u0026lt;52个1\u0026gt;) * 2^52 = 0b\u0026lt;53个1\u0026gt;\u003c/p\u003e\n\u003ch3\u003ee.g. 最大值\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|01111111111|1111111111111111111111111111111111111111111111111111|\n+-+-----------+----------------------------------------------------+\n|+| 真实值1023|                 52个1                              |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这个数就是 (0b1.\u0026lt;52个1\u0026gt;) * 2^1023\u003c/p\u003e\n\u003ch3\u003ee.g. INF\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|11111111111|0000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+| 全1       |                 全0                                |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ee.g. NAN\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|11111111111|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|\n+-+-----------+----------------------------------------------------+\n|+| 全1       |                 非0                                |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e因此非零的部分可以用来存数据，取值区间是1 ~ 2^52-1\u003c/p\u003e\n\u003ch3\u003ee.g. 最小规格化正数\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|00000000001|0000000000000000000000000000000000000000000000000000|\n+-+-----------+----------------------------------------------------+\n|+| 表示-1022 |                 全0                                |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e表示 1 * 2^-1022\u003c/p\u003e\n\u003ch3\u003ee.g. 非规格化\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e+-+-----------+----------------------------------------------------+\n|0|00000000000|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|\n+-+-----------+----------------------------------------------------+\n|+| 全0       |                 非0                                |\n+-+-----------+----------------------------------------------------+\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e指数位全0，真实指数为-1023\u003c/p\u003e\n\u003cp\u003e表示值为 (0b1.XXXXXXX...) * 2^-1023\u003c/p\u003e\n\u003cp\u003e非规格化数小于任何规格化数(正的，负的相反)\u003c/p\u003e\n"},"__N_SSG":true},"page":"/post/[...all]","query":{"all":["2020","double二进制布局"]},"buildId":"PZ7nuBuBTulsY6UqnfCzx","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-c30a0338d988282f18a0.js"></script><script src="/_next/static/chunks/main-794d8598b5f1f819e70a.js" async=""></script><script src="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" async=""></script><script src="/_next/static/chunks/framework.6c6c2144b5674c37af03.js" async=""></script><script src="/_next/static/chunks/commons.c1da88ced54c9ffa7714.js" async=""></script><script src="/_next/static/chunks/pages/_app-6b3651ecef8878c0ce3d.js" async=""></script><script src="/_next/static/chunks/99a17ff61bb56832986f97369f36a5b6e9c99511.4b656b6a47797cef6e06.js" async=""></script><script src="/_next/static/chunks/pages/post/%5B...all%5D-2d583e24f5dfdb34109a.js" async=""></script><script src="/_next/static/PZ7nuBuBTulsY6UqnfCzx/_buildManifest.js" async=""></script><script src="/_next/static/PZ7nuBuBTulsY6UqnfCzx/_ssgManifest.js" async=""></script></body></html>